     1 00000000                                 [FORMAT "WCOFF"]
     2 00000000                                 [INSTRSET "i486p"]
     3 00000000                                 [OPTIMIZE 1]
     4 00000000                                 [OPTION 1]
     5 00000000                                 [BITS 32]
     6 00000000                                 	EXTERN	_init_gdtidt
     7 00000000                                 	EXTERN	_Init_PIC
     8 00000000                                 	EXTERN	_io_sti
     9 00000000                                 	EXTERN	_fifo8_init
    10 00000000                                 	EXTERN	_io_out8
    11 00000000                                 	EXTERN	_Init_Keyboard
    12 00000000                                 	EXTERN	_Enable_Mouse
    13 00000000                                 	EXTERN	_DrawBack
    14 00000000                                 	EXTERN	_sprintf
    15 00000000                                 	EXTERN	_PutFont_Asc
    16 00000000                                 	EXTERN	_Init_MouseCur
    17 00000000                                 	EXTERN	_PutBlock
    18 00000000                                 	EXTERN	_io_cli
    19 00000000                                 	EXTERN	_fifo8_status
    20 00000000                                 	EXTERN	_fifo8_get
    21 00000000                                 	EXTERN	_Mouse_Decode
    22 00000000                                 	EXTERN	_RectFill
    23 00000000                                 	EXTERN	_io_stihlt
    24 00000000                                 [FILE "kernel.c"]
    25                                          [SECTION .data]
    26 00000000                                 LC0:
    27 00000000 53 63 72 65 65 6E 3A 28 25 64   	DB	"Screen:(%d, %d)",0x00
       0000000A 2C 20 25 64 29 00 
    28 00000010                                 LC2:
    29 00000010 5B 6C 63 72 20 25 34 64 20 25   	DB	"[lcr %4d %4d]",0x00
       0000001A 34 64 5D 00 
    30 0000001E                                 LC3:
    31 0000001E 4D 6F 75 73 65 50 6F 73 3A 28   	DB	"MousePos:(%3d, %3d)",0x00
       00000028 25 33 64 2C 20 25 33 64 29 00 
    32 00000032                                 LC1:
    33 00000032 25 30 32 58 00                  	DB	"%02X",0x00
    34                                          [SECTION .text]
    35 00000000                                 	GLOBAL	_HariMain
    36 00000000                                 _HariMain:
    37 00000000 55                              	PUSH	EBP
    38 00000001 89 E5                           	MOV	EBP,ESP
    39 00000003 57                              	PUSH	EDI
    40 00000004 56                              	PUSH	ESI
    41 00000005 53                              	PUSH	EBX
    42 00000006 8D 9D FFFFFF54                  	LEA	EBX,DWORD [-172+EBP]
    43 0000000C 81 EC 0000025C                  	SUB	ESP,604
    44 00000012 A1 00000FF8                     	MOV	EAX,DWORD [4088]
    45 00000017 89 85 FFFFFDA0                  	MOV	DWORD [-608+EBP],EAX
    46 0000001D 0F BF 05 00000FF6               	MOVSX	EAX,WORD [4086]
    47 00000024 0F BF 3D 00000FF4               	MOVSX	EDI,WORD [4084]
    48 0000002B 89 85 FFFFFD9C                  	MOV	DWORD [-612+EBP],EAX
    49 00000031 E8 [00000000]                   	CALL	_init_gdtidt
    50 00000036 E8 [00000000]                   	CALL	_Init_PIC
    51 0000003B E8 [00000000]                   	CALL	_io_sti
    52 00000040 8D 85 FFFFFE34                  	LEA	EAX,DWORD [-460+EBP]
    53 00000046 50                              	PUSH	EAX
    54 00000047 6A 20                           	PUSH	32
    55 00000049 68 [00000040]                   	PUSH	_KeyFifo
    56 0000004E E8 [00000000]                   	CALL	_fifo8_init
    57 00000053 8D 85 FFFFFDB4                  	LEA	EAX,DWORD [-588+EBP]
    58 00000059 50                              	PUSH	EAX
    59 0000005A 68 00000080                     	PUSH	128
    60 0000005F 68 [00000060]                   	PUSH	_MouseFifo
    61 00000064 E8 [00000000]                   	CALL	_fifo8_init
    62 00000069 68 000000F9                     	PUSH	249
    63 0000006E 6A 21                           	PUSH	33
    64 00000070 E8 [00000000]                   	CALL	_io_out8
    65 00000075 83 C4 20                        	ADD	ESP,32
    66 00000078 68 000000EF                     	PUSH	239
    67 0000007D 68 000000A1                     	PUSH	161
    68 00000082 E8 [00000000]                   	CALL	_io_out8
    69 00000087 E8 [00000000]                   	CALL	_Init_Keyboard
    70 0000008C E8 [00000000]                   	CALL	_Enable_Mouse
    71 00000091 FF B5 FFFFFD9C                  	PUSH	DWORD [-612+EBP]
    72 00000097 57                              	PUSH	EDI
    73 00000098 FF B5 FFFFFDA0                  	PUSH	DWORD [-608+EBP]
    74 0000009E E8 [00000000]                   	CALL	_DrawBack
    75 000000A3 FF B5 FFFFFD9C                  	PUSH	DWORD [-612+EBP]
    76 000000A9 57                              	PUSH	EDI
    77 000000AA 68 [00000000]                   	PUSH	LC0
    78 000000AF 53                              	PUSH	EBX
    79 000000B0 E8 [00000000]                   	CALL	_sprintf
    80 000000B5 83 C4 24                        	ADD	ESP,36
    81 000000B8 53                              	PUSH	EBX
    82 000000B9 8D 9D FFFFFE54                  	LEA	EBX,DWORD [-428+EBP]
    83 000000BF 6A 0F                           	PUSH	15
    84 000000C1 6A 00                           	PUSH	0
    85 000000C3 6A 00                           	PUSH	0
    86 000000C5 57                              	PUSH	EDI
    87 000000C6 FF B5 FFFFFDA0                  	PUSH	DWORD [-608+EBP]
    88 000000CC E8 [00000000]                   	CALL	_PutFont_Asc
    89 000000D1 6A 36                           	PUSH	54
    90 000000D3 8D 57 F0                        	LEA	EDX,DWORD [-16+EDI]
    91 000000D6 B9 00000002                     	MOV	ECX,2
    92 000000DB 89 D0                           	MOV	EAX,EDX
    93 000000DD 53                              	PUSH	EBX
    94 000000DE 99                              	CDQ
    95 000000DF F7 F9                           	IDIV	ECX
    96 000000E1 8B 95 FFFFFD9C                  	MOV	EDX,DWORD [-612+EBP]
    97 000000E7 89 85 FFFFFD98                  	MOV	DWORD [-616+EBP],EAX
    98 000000ED 83 EA 10                        	SUB	EDX,16
    99 000000F0 89 D0                           	MOV	EAX,EDX
   100 000000F2 99                              	CDQ
   101 000000F3 F7 F9                           	IDIV	ECX
   102 000000F5 89 C6                           	MOV	ESI,EAX
   103 000000F7 E8 [00000000]                   	CALL	_Init_MouseCur
   104 000000FC 83 C4 20                        	ADD	ESP,32
   105 000000FF 6A 10                           	PUSH	16
   106 00000101 53                              	PUSH	EBX
   107 00000102 56                              	PUSH	ESI
   108 00000103 FF B5 FFFFFD98                  	PUSH	DWORD [-616+EBP]
   109 00000109 6A 10                           	PUSH	16
   110 0000010B 6A 10                           	PUSH	16
   111 0000010D 57                              	PUSH	EDI
   112 0000010E FF B5 FFFFFDA0                  	PUSH	DWORD [-608+EBP]
   113 00000114 E8 [00000000]                   	CALL	_PutBlock
   114 00000119 83 C4 20                        	ADD	ESP,32
   115 0000011C                                 L2:
   116 0000011C E8 [00000000]                   	CALL	_io_cli
   117 00000121 68 [00000040]                   	PUSH	_KeyFifo
   118 00000126 E8 [00000000]                   	CALL	_fifo8_status
   119 0000012B 68 [00000060]                   	PUSH	_MouseFifo
   120 00000130 89 C3                           	MOV	EBX,EAX
   121 00000132 E8 [00000000]                   	CALL	_fifo8_status
   122 00000137 8D 04 18                        	LEA	EAX,DWORD [EAX+EBX*1]
   123 0000013A 5B                              	POP	EBX
   124 0000013B 5A                              	POP	EDX
   125 0000013C 85 C0                           	TEST	EAX,EAX
   126 0000013E 0F 84 000001F4                  	JE	L18
   127 00000144 68 [00000040]                   	PUSH	_KeyFifo
   128 00000149 E8 [00000000]                   	CALL	_fifo8_status
   129 0000014E 59                              	POP	ECX
   130 0000014F 85 C0                           	TEST	EAX,EAX
   131 00000151 0F 85 0000018D                  	JNE	L19
   132 00000157 68 [00000060]                   	PUSH	_MouseFifo
   133 0000015C E8 [00000000]                   	CALL	_fifo8_status
   134 00000161 5A                              	POP	EDX
   135 00000162 85 C0                           	TEST	EAX,EAX
   136 00000164 74 B6                           	JE	L2
   137 00000166 68 [00000060]                   	PUSH	_MouseFifo
   138 0000016B E8 [00000000]                   	CALL	_fifo8_get
   139 00000170 89 C3                           	MOV	EBX,EAX
   140 00000172 E8 [00000000]                   	CALL	_io_sti
   141 00000177 0F B6 C3                        	MOVZX	EAX,BL
   142 0000017A 50                              	PUSH	EAX
   143 0000017B 8D 85 FFFFFDA4                  	LEA	EAX,DWORD [-604+EBP]
   144 00000181 50                              	PUSH	EAX
   145 00000182 E8 [00000000]                   	CALL	_Mouse_Decode
   146 00000187 83 C4 0C                        	ADD	ESP,12
   147 0000018A 85 C0                           	TEST	EAX,EAX
   148 0000018C 74 8E                           	JE	L2
   149 0000018E FF B5 FFFFFDAC                  	PUSH	DWORD [-596+EBP]
   150 00000194 FF B5 FFFFFDA8                  	PUSH	DWORD [-600+EBP]
   151 0000019A 68 [00000010]                   	PUSH	LC2
   152 0000019F 8D 5D 84                        	LEA	EBX,DWORD [-124+EBP]
   153 000001A2 53                              	PUSH	EBX
   154 000001A3 E8 [00000000]                   	CALL	_sprintf
   155 000001A8 83 C4 10                        	ADD	ESP,16
   156 000001AB 8B 85 FFFFFDB0                  	MOV	EAX,DWORD [-592+EBP]
   157 000001B1 A9 00000001                     	TEST	EAX,1
   158 000001B6 74 04                           	JE	L11
   159 000001B8 C6 45 85 4C                     	MOV	BYTE [-123+EBP],76
   160 000001BC                                 L11:
   161 000001BC A9 00000002                     	TEST	EAX,2
   162 000001C1 74 04                           	JE	L12
   163 000001C3 C6 45 87 52                     	MOV	BYTE [-121+EBP],82
   164 000001C7                                 L12:
   165 000001C7 83 E0 04                        	AND	EAX,4
   166 000001CA 74 04                           	JE	L13
   167 000001CC C6 45 86 43                     	MOV	BYTE [-122+EBP],67
   168 000001D0                                 L13:
   169 000001D0 6A 1F                           	PUSH	31
   170 000001D2 68 00000097                     	PUSH	151
   171 000001D7 6A 10                           	PUSH	16
   172 000001D9 6A 20                           	PUSH	32
   173 000001DB 6A 0F                           	PUSH	15
   174 000001DD 57                              	PUSH	EDI
   175 000001DE FF B5 FFFFFDA0                  	PUSH	DWORD [-608+EBP]
   176 000001E4 E8 [00000000]                   	CALL	_RectFill
   177 000001E9 53                              	PUSH	EBX
   178 000001EA 6A 10                           	PUSH	16
   179 000001EC 6A 10                           	PUSH	16
   180 000001EE 6A 20                           	PUSH	32
   181 000001F0 57                              	PUSH	EDI
   182 000001F1 FF B5 FFFFFDA0                  	PUSH	DWORD [-608+EBP]
   183 000001F7 E8 [00000000]                   	CALL	_PutFont_Asc
   184 000001FC 8D 46 0F                        	LEA	EAX,DWORD [15+ESI]
   185 000001FF 83 C4 34                        	ADD	ESP,52
   186 00000202 50                              	PUSH	EAX
   187 00000203 8B 85 FFFFFD98                  	MOV	EAX,DWORD [-616+EBP]
   188 00000209 83 C0 0F                        	ADD	EAX,15
   189 0000020C 50                              	PUSH	EAX
   190 0000020D 56                              	PUSH	ESI
   191 0000020E FF B5 FFFFFD98                  	PUSH	DWORD [-616+EBP]
   192 00000214 6A 36                           	PUSH	54
   193 00000216 57                              	PUSH	EDI
   194 00000217 FF B5 FFFFFDA0                  	PUSH	DWORD [-608+EBP]
   195 0000021D E8 [00000000]                   	CALL	_RectFill
   196 00000222 8B 85 FFFFFDA8                  	MOV	EAX,DWORD [-600+EBP]
   197 00000228 03 B5 FFFFFDAC                  	ADD	ESI,DWORD [-596+EBP]
   198 0000022E 83 C4 1C                        	ADD	ESP,28
   199 00000231 01 85 FFFFFD98                  	ADD	DWORD [-616+EBP],EAX
   200 00000237 0F 88 00000098                  	JS	L20
   201 0000023D                                 L14:
   202 0000023D 85 F6                           	TEST	ESI,ESI
   203 0000023F 0F 88 00000089                  	JS	L21
   204 00000245                                 L15:
   205 00000245 8D 47 F0                        	LEA	EAX,DWORD [-16+EDI]
   206 00000248 39 85 FFFFFD98                  	CMP	DWORD [-616+EBP],EAX
   207 0000024E 7E 06                           	JLE	L16
   208 00000250 89 85 FFFFFD98                  	MOV	DWORD [-616+EBP],EAX
   209 00000256                                 L16:
   210 00000256 8B 85 FFFFFD9C                  	MOV	EAX,DWORD [-612+EBP]
   211 0000025C 83 E8 10                        	SUB	EAX,16
   212 0000025F 39 C6                           	CMP	ESI,EAX
   213 00000261 7E 02                           	JLE	L17
   214 00000263 89 C6                           	MOV	ESI,EAX
   215 00000265                                 L17:
   216 00000265 56                              	PUSH	ESI
   217 00000266 FF B5 FFFFFD98                  	PUSH	DWORD [-616+EBP]
   218 0000026C 68 [0000001E]                   	PUSH	LC3
   219 00000271 53                              	PUSH	EBX
   220 00000272 E8 [00000000]                   	CALL	_sprintf
   221 00000277 6A 31                           	PUSH	49
   222 00000279 68 00000097                     	PUSH	151
   223 0000027E 6A 21                           	PUSH	33
   224 00000280 6A 00                           	PUSH	0
   225 00000282 6A 0F                           	PUSH	15
   226 00000284 57                              	PUSH	EDI
   227 00000285 FF B5 FFFFFDA0                  	PUSH	DWORD [-608+EBP]
   228 0000028B E8 [00000000]                   	CALL	_RectFill
   229 00000290 83 C4 2C                        	ADD	ESP,44
   230 00000293 53                              	PUSH	EBX
   231 00000294 6A 10                           	PUSH	16
   232 00000296 6A 21                           	PUSH	33
   233 00000298 6A 00                           	PUSH	0
   234 0000029A 57                              	PUSH	EDI
   235 0000029B FF B5 FFFFFDA0                  	PUSH	DWORD [-608+EBP]
   236 000002A1 E8 [00000000]                   	CALL	_PutFont_Asc
   237 000002A6 8D 85 FFFFFE54                  	LEA	EAX,DWORD [-428+EBP]
   238 000002AC 6A 10                           	PUSH	16
   239 000002AE 50                              	PUSH	EAX
   240 000002AF 56                              	PUSH	ESI
   241 000002B0 FF B5 FFFFFD98                  	PUSH	DWORD [-616+EBP]
   242 000002B6 6A 10                           	PUSH	16
   243 000002B8 6A 10                           	PUSH	16
   244 000002BA 57                              	PUSH	EDI
   245 000002BB FF B5 FFFFFDA0                  	PUSH	DWORD [-608+EBP]
   246 000002C1 E8 [00000000]                   	CALL	_PutBlock
   247 000002C6 83 C4 38                        	ADD	ESP,56
   248 000002C9 E9 FFFFFE4E                     	JMP	L2
   249 000002CE                                 L21:
   250 000002CE 31 F6                           	XOR	ESI,ESI
   251 000002D0 E9 FFFFFF70                     	JMP	L15
   252 000002D5                                 L20:
   253 000002D5 C7 85 FFFFFD98 00000000         	MOV	DWORD [-616+EBP],0
   254 000002DF E9 FFFFFF59                     	JMP	L14
   255 000002E4                                 L19:
   256 000002E4 68 [00000040]                   	PUSH	_KeyFifo
   257 000002E9 E8 [00000000]                   	CALL	_fifo8_get
   258 000002EE 89 C3                           	MOV	EBX,EAX
   259 000002F0 E8 [00000000]                   	CALL	_io_sti
   260 000002F5 53                              	PUSH	EBX
   261 000002F6 8D 5D 84                        	LEA	EBX,DWORD [-124+EBP]
   262 000002F9 68 [00000032]                   	PUSH	LC1
   263 000002FE 53                              	PUSH	EBX
   264 000002FF E8 [00000000]                   	CALL	_sprintf
   265 00000304 6A 1F                           	PUSH	31
   266 00000306 6A 0F                           	PUSH	15
   267 00000308 6A 10                           	PUSH	16
   268 0000030A 6A 00                           	PUSH	0
   269 0000030C 6A 0F                           	PUSH	15
   270 0000030E 57                              	PUSH	EDI
   271 0000030F FF B5 FFFFFDA0                  	PUSH	DWORD [-608+EBP]
   272 00000315 E8 [00000000]                   	CALL	_RectFill
   273 0000031A 83 C4 2C                        	ADD	ESP,44
   274 0000031D 53                              	PUSH	EBX
   275 0000031E 6A 10                           	PUSH	16
   276 00000320 6A 10                           	PUSH	16
   277 00000322 6A 00                           	PUSH	0
   278 00000324 57                              	PUSH	EDI
   279 00000325 FF B5 FFFFFDA0                  	PUSH	DWORD [-608+EBP]
   280 0000032B E8 [00000000]                   	CALL	_PutFont_Asc
   281 00000330 83 C4 18                        	ADD	ESP,24
   282 00000333 E9 FFFFFDE4                     	JMP	L2
   283 00000338                                 L18:
   284 00000338 E8 [00000000]                   	CALL	_io_stihlt
   285 0000033D E9 FFFFFDDA                     	JMP	L2
   286 00000342                                 	GLOBAL	_KeyFifo
   287                                          [SECTION .data]
   288 00000037 00 00 00 00 00 00 00 00 00      	ALIGNB	16
   289 00000040                                 _KeyFifo:
   290 00000040 00 00 00 00 00 00 00 00 00 00   	RESB	24
       0000004A 00 00 00 00 00 00 00 00 00 00 
       00000054 00 00 00 00 
   291 00000058                                 	GLOBAL	_MouseFifo
   292                                          [SECTION .data]
   293 00000058 00 00 00 00 00 00 00 00         	ALIGNB	16
   294 00000060                                 _MouseFifo:
   295 00000060 00 00 00 00 00 00 00 00 00 00   	RESB	24
       0000006A 00 00 00 00 00 00 00 00 00 00 
       00000074 00 00 00 00 
